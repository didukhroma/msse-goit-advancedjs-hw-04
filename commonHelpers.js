import{a as d,i as g,S as L,l as E}from"./assets/vendor-02569a35.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function a(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(t){if(t.ep)return;t.ep=!0;const r=a(t);fetch(t.href,r)}})();const T="20604497-76eef09585394ebdddc8f0af4",p=40,n={form:document.querySelector("#search-form"),gallery:document.querySelector(".gallery"),guard:document.querySelector(".guard"),goTop:document.querySelector(".js-go-top")};function S(){const{height:e}=n.gallery.firstElementChild.getBoundingClientRect();window.scrollBy({top:e*2,behavior:"smooth"})}function q(){window.scrollTo(0,0)}d.defaults.baseURL="https://pixabay.com/api/";d.defaults.params={key:T,image_type:"photo",per_page:p,orientation:"horizontal",safesearch:!0};class P{constructor(){this.query="",this.page=1}async getPhoto(){const o=await d({params:{q:this.query,page:this.page}});if(o.status!==200)throw new Error(o.statusText);return o.data}nextPage(){this.page+=1}set searchQuery(o){this.query=o}get searchQuery(){return this.query}startPage(){this.page=1}}const l=new P;function x(e){return e.trim().toLowerCase().replace(/\s/g,"+")}function h(e){return e.map(({webformatURL:o,tags:a,likes:s,views:t,largeImageURL:r,comments:c,downloads:v})=>`<div class="photo-card" data-text=${a} data-large=${r}>
    <div class="photo-wrapper" >
    <img class="photo" src="${o}" alt="${a}" loading="lazy"  />
    </div>
    <div class="info">
        <p class="info-item">
            <b>Likes</b>${s}
        </p>
            <p class="info-item">
        <b>Views</b>${t}
        </p>
        <p class="info-item">
            <b>Comments</b>${c}
        </p>
        <p class="info-item">
            <b>Downloads</b>${v}
        </p>
    </div>
</div>`).join("")}const A=3e3,H="Sorry, there are no images matching your search query. Please try again",i={title:"Hooray!",message:"We found 500 images.",timeout:A,position:"topRight"};function _(e){i.title="Hooray!",i.message=`We found ${e} images.`,g.success(i)}function m(e){return i.title="Error",i.message=e||H,g.error(i)}function k(){return i.title="Warning",i.message="We're sorry, but you've reached the end of search results.",g.warning(i)}const u={selector:".photo-card",srcImage:"data-large",caption:"data-text"},y=new L(u.selector,{sourceAttr:u.srcImage,captionsData:u.caption,captionDelay:250,animationSpeed:500}),b=n.form.elements.searchQuery;n.form.addEventListener("submit",$);b.addEventListener("input",E(M,300));n.goTop.addEventListener("click",O);window.addEventListener("scroll",w);function M(){const e=n.form.elements[1];if(!b.value){e.disabled=!0;return}e.disabled&&(e.disabled=!1)}async function $(e){e.preventDefault();const o=x(e.currentTarget.children.searchQuery.value);o!==l.searchQuery&&(f.unobserve(n.guard),l.startPage(),l.searchQuery=o,n.gallery.innerHTML="");try{const a=await l.getPhoto(),{totalHits:s,hits:t}=a;if(!s)throw new Error("");s>p&&f.observe(n.guard);const r=h(t);n.gallery.insertAdjacentHTML("beforeend",r),_(s),y.refresh()}catch(a){console.log(a),m(a.message)}}const R={rootMargin:"400px"},I=(e,o)=>{e.forEach(async a=>{if(a.isIntersecting){l.nextPage();try{const s=await l.getPhoto(),{totalHits:t,hits:r}=s;t<p*l.page&&(o.unobserve(n.guard),k());const c=h(r);n.gallery.insertAdjacentHTML("beforeend",c),y.refresh(),S()}catch(s){console.log(s),m(s.message)}}})},f=new IntersectionObserver(I,R);function O(){q()}function w(){window.removeEventListener("load",w),window.scrollY>800?n.goTop.classList.remove("visually-hidden"):n.goTop.classList.add("visually-hidden")}
//# sourceMappingURL=commonHelpers.js.map

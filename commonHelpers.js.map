{"version":3,"file":"commonHelpers.js","sources":["../src/js/common.js","../src/js/api.js","../src/js/helpers.js","../src/js/iziToast.js","../src/js/homeWork.js"],"sourcesContent":["export const AUTH_TOKEN = '20604497-76eef09585394ebdddc8f0af4';\r\n\r\nexport const ref = {\r\n  form: document.querySelector('#search-form'),\r\n  gallery: document.querySelector('.gallery'),\r\n  loadMore: document.querySelector('.load-more'),\r\n};\r\n","import axios from 'axios';\r\nimport { AUTH_TOKEN } from './common';\r\n\r\n/**\r\n *\r\n */\r\naxios.defaults.baseURL = 'https://pixabay.com/api/';\r\naxios.defaults.params = {\r\n  key: AUTH_TOKEN,\r\n  image_type: 'photo',\r\n  per_page: 10,\r\n};\r\n\r\nexport function getPhotos(query = '', page = 1) {\r\n  return axios({\r\n    params: {\r\n      q: query,\r\n      page: page,\r\n    },\r\n  });\r\n}\r\n","export function prepareQueryForRequest(query) {\r\n  return query.trim().toLowerCase().split(' ').join('+');\r\n}\r\n\r\nexport function createMarkup(data) {\r\n  return data\r\n    .map(\r\n      ({\r\n        webformatURL,\r\n        tags,\r\n        likes,\r\n        views,\r\n        largeImageURL,\r\n        comments,\r\n        downloads,\r\n      }) => {\r\n        return `<div class=\"photo-card\" >\r\n    <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" data-large=${largeImageURL} />\r\n    <div class=\"info\">\r\n        <p class=\"info-item\">\r\n            <b>Likes</b>${likes}\r\n        </p>\r\n            <p class=\"info-item\">\r\n        <b>Views</b>${views}\r\n        </p>\r\n        <p class=\"info-item\">\r\n            <b>Comments</b>${comments}\r\n        </p>\r\n        <p class=\"info-item\">\r\n            <b>Downloads</b>${downloads}\r\n        </p>\r\n    </div>\r\n</div>`;\r\n      }\r\n    )\r\n    .join('');\r\n}\r\n","//Import\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n\r\n/**\r\n * Delay time for iziToast error message\r\n *\r\n * @type {Number} - time in milliseconds\r\n * @example const DELAY_TIME = 3000;\r\n */\r\nconst DELAY_TIME = 30000;\r\n\r\n/**\r\n * Settings for iziToast \r\n * \r\n * @type {{ title: string; timeout: number; position: string; message: string; }}\r\n * @example const iziToastSettings = {\r\n  title: 'Error',\r\n  timeout: DELAY_TIME,\r\n  position: 'topCenter',\r\n  message: 'Oops! Something went wrong! Try reloading the page!',\r\n};\r\n*\r\n* @description Read more about iziToast settings at https://izitoast.marcelodolza.com/\r\n */\r\nconst iziToastSettings = {\r\n  timeout: DELAY_TIME,\r\n  position: 'topRight',\r\n};\r\n\r\n/**\r\n * Show iziToast error message\r\n *\r\n * @export function\r\n * @example function errorToast() {\r\n  iziToast.error(iziToastSettings);\r\n}\r\n*@description Read more about iziToast settings at https://izitoast.marcelodolza.com/\r\n */\r\nexport function successToast(totalHits) {\r\n  iziToastSettings.title = 'Hooray!';\r\n  iziToastSettings.message = `We found ${totalHits} images.`;\r\n  iziToast.success(iziToastSettings);\r\n}\r\n\r\nexport function errorToast() {\r\n  iziToastSettings.title = 'Error';\r\n  iziToastSettings.message =\r\n    'Oops! Something went wrong! Try reloading the page!';\r\n  iziToast.error(iziToastSettings);\r\n}\r\n\r\nexport function warningToast() {\r\n  iziToastSettings.title = 'Warning';\r\n  iziToastSettings.message =\r\n    'Oops! Something went wrong! Try to change search query';\r\n  iziToast.warning(iziToastSettings);\r\n}\r\n","import { getPhotos } from './api';\r\nimport { ref } from './common';\r\nimport { prepareQueryForRequest, createMarkup } from './helpers';\r\nimport { successToast, warningToast, errorToast } from './iziToast';\r\n\r\nlet searchQuery = '';\r\n\r\nref.form.addEventListener('submit', handleSubmit);\r\n\r\nref.loadMore.classList.add('visually-hidden');\r\n\r\nasync function handleSubmit(e) {\r\n  e.preventDefault();\r\n  ref.loadMore.classList.remove('visually-hidden');\r\n\r\n  const query = prepareQueryForRequest(\r\n    e.currentTarget.children.searchQuery.value\r\n  );\r\n\r\n  if (query !== searchQuery) {\r\n    searchQuery = query;\r\n    ref.gallery.innerHTML = '';\r\n  }\r\n\r\n  let response = '';\r\n  try {\r\n    response = await getPhotos(query);\r\n    if (response.status !== 200) throw new Error(response);\r\n\r\n    console.log(response);\r\n  } catch (error) {\r\n    errorToast();\r\n    console.log(error);\r\n  }\r\n\r\n  const { total, totalHits, hits } = response.data;\r\n\r\n  if (!total) {\r\n    warningToast();\r\n    return;\r\n  }\r\n  const markup = createMarkup(hits);\r\n  ref.gallery.insertAdjacentHTML('beforeend', markup);\r\n}\r\n"],"names":["AUTH_TOKEN","ref","axios","getPhotos","query","page","prepareQueryForRequest","createMarkup","data","webformatURL","tags","likes","views","largeImageURL","comments","downloads","DELAY_TIME","iziToastSettings","errorToast","iziToast","warningToast","searchQuery","handleSubmit","e","response","error","total","totalHits","hits","markup"],"mappings":"6vBAAO,MAAMA,EAAa,qCAEbC,EAAM,CACjB,KAAM,SAAS,cAAc,cAAc,EAC3C,QAAS,SAAS,cAAc,UAAU,EAC1C,SAAU,SAAS,cAAc,YAAY,CAC/C,ECAAC,EAAM,SAAS,QAAU,2BACzBA,EAAM,SAAS,OAAS,CACtB,IAAKF,EACL,WAAY,QACZ,SAAU,EACZ,EAEO,SAASG,EAAUC,EAAQ,GAAIC,EAAO,EAAG,CAC9C,OAAOH,EAAM,CACX,OAAQ,CACN,EAAGE,EACH,KAAMC,CACP,CACL,CAAG,CACH,CCpBO,SAASC,EAAuBF,EAAO,CAC5C,OAAOA,EAAM,KAAM,EAAC,YAAa,EAAC,MAAM,GAAG,EAAE,KAAK,GAAG,CACvD,CAEO,SAASG,EAAaC,EAAM,CACjC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,cAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,gBACCN,WAAsBC,gCAAmCG;AAAA;AAAA;AAAA,0BAG/CF;AAAA;AAAA;AAAA,sBAGJC;AAAA;AAAA;AAAA,6BAGOE;AAAA;AAAA;AAAA,8BAGCC;AAAA;AAAA;AAAA,OAKzB,EACA,KAAK,EAAE,CACZ,CC1BA,MAAMC,EAAa,IAebC,EAAmB,CACvB,QAASD,EACT,SAAU,UACZ,EAiBO,SAASE,GAAa,CAC3BD,EAAiB,MAAQ,QACzBA,EAAiB,QACf,sDACFE,EAAS,MAAMF,CAAgB,CACjC,CAEO,SAASG,GAAe,CAC7BH,EAAiB,MAAQ,UACzBA,EAAiB,QACf,yDACFE,EAAS,QAAQF,CAAgB,CACnC,CCpDA,IAAII,EAAc,GAElBpB,EAAI,KAAK,iBAAiB,SAAUqB,CAAY,EAEhDrB,EAAI,SAAS,UAAU,IAAI,iBAAiB,EAE5C,eAAeqB,EAAaC,EAAG,CAC7BA,EAAE,eAAc,EAChBtB,EAAI,SAAS,UAAU,OAAO,iBAAiB,EAE/C,MAAMG,EAAQE,EACZiB,EAAE,cAAc,SAAS,YAAY,KACzC,EAEMnB,IAAUiB,IACZA,EAAcjB,EACdH,EAAI,QAAQ,UAAY,IAG1B,IAAIuB,EAAW,GACf,GAAI,CAEF,GADAA,EAAW,MAAMrB,EAAUC,CAAK,EAC5BoB,EAAS,SAAW,IAAK,MAAM,IAAI,MAAMA,CAAQ,EAErD,QAAQ,IAAIA,CAAQ,CACrB,OAAQC,EAAP,CACAP,IACA,QAAQ,IAAIO,CAAK,CAClB,CAED,KAAM,CAAE,MAAAC,EAAO,UAAAC,EAAW,KAAAC,CAAI,EAAKJ,EAAS,KAE5C,GAAI,CAACE,EAAO,CACVN,IACA,MACD,CACD,MAAMS,EAAStB,EAAaqB,CAAI,EAChC3B,EAAI,QAAQ,mBAAmB,YAAa4B,CAAM,CACpD"}